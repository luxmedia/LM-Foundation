// Foundation by ZURB
// foundation.zurb.com
// Licensed under MIT Open Source

@require '_global'

//
// @variables
//

$include-html-alert-classes =               com_js.ALERT
$include-html-alert-alt-classes ?=           false

// alert padding.
$alert-padding-top ?=                        rem-calc(14)
$alert-padding-default-float ?=              $alert-padding-top
$alert-padding-opposite-direction ?=         ($alert-padding-top + rem-calc(10))
$alert-padding-bottom ?=                     $alert-padding-top
$alert-padding ?=                            ($alert-padding-top $alert-padding-opposite-direction $alert-padding-bottom $alert-padding-default-float)

// text style.
$alert-font-weight ?=                        $font-weight-normal
$alert-font-size ?=                          fontsize(1.2rem)
$alert-font-color ?=                         $white
$alert-font-color-alt ?=                     darken($secondary-color, 66%)
$alert-font-color-warning ?=                 $warning-font-color
$alert-font-color-critical ?=                $critical-font-color

// close hover effect.
$alert-function-factor ?=                    14% // -14%

// border styles.
$alert-border-style ?=                       solid
$alert-border-width ?=                       (2px 2px 2px 10px) // (1px 1px 1px 5px)
$alert-border-color ?=                       darken($primary-color, $alert-function-factor)
$alert-bottom-margin ?=                      rem-calc(20)

// style the close buttons
$alert-close-color ?=                        $charcoal-1
$alert-close-background ?=                   false
$alert-close-top ?=                          50%
$alert-close-position ?=                     rem-calc(4)
$alert-close-font-size ?=                    fontsize(2rem)
$alert-close-opacity ?=                      .3
$alert-close-opacity-hover ?=                .5
$alert-close-padding ?=                      rem-calc(0 10 10)
$alert-close-background ?=                   inherit

$alert-bg-icosize ?=                        rem-calc(24)

// border radius
$alert-radius ?=                             $global-radius

$alert-transition-speed ?=                   300ms
$alert-transition-ease ?=                    ease-out


//
// @mixins
//

// We use this mixin to create a default alert base.
alert-base() {
    display: block
    font-weight: $alert-font-weight
    margin-bottom: $alert-bottom-margin
    position: relative

    single-transition(opacity, $alert-transition-speed, $alert-transition-ease)
}

alert-size($padding = $alert-padding, $font-size = $alert-font-size, $full-width = false) {
    padding: $alert-padding
    font-size: $alert-font-size

    if $full-width {
        // padding-right: 0
        // padding-left: 0
        // width: 100%
        display: block
    }

    {$is-svg-support} & {
        padding-{$default-float}: (2*$alert-bg-icosize)
    }
}

// We use this mixin to add alert styles
//
// $bg - The background of the alert. Default: $primary-color.
alert-style($bg = $primary-color, $font-color = $alert-font-color, $border-color = $primary-color) {

    // This finds the lightness percentage of the background color.
    $bg-lightness = lightness($bg)

    // We control which background color and border come through.
    background-color: $bg

    if $border-color {
        border-style: $alert-border-style
        border-width: $alert-border-width
        border-color: $border-color
    }

    // Control the text color for you based on the background color.
    if ($bg-lightness > 70% && $font-color == $alert-font-color) {
        color: $fcol = $alert-font-color-alt
    } else {
        color: $fcol = $font-color
    }
    
    // adapt color of links and other elements inside of alert
    p, small, strong, h1, h2, h3, h4, h5 {
        color: $fcol
    }
    a {
        color: darken($fcol,25%)
        &:hover {
            color: darken($fcol,50%)
        }
    }
    .btn {
        margin-bottom: 0
    }
}

// We use this to create the close button.
alert-close() {
    if $alert-close-background {
        background: $alert-close-background
    }
    font-size: $alert-close-font-size
    line-height: .9
    margin-top: -($alert-close-padding[0]+($alert-close-font-size/2))
    opacity: $alert-close-opacity
    position: absolute
    padding: $alert-close-padding
    top: $alert-close-top
    {$opposite-direction}: $alert-close-position
    // color: $alert-close-color
    &:hover,
    &:focus {
        opacity: $alert-close-opacity-hover
    }
}

// We use this to quickly create alerts with a single mixin.
//
// $bg - Background of alert. Default: $primary-color.
// $radius - Radius of alert box. Default: false.
alert($bg = $primary-color, $radius = false) {
    alert-base()
    alert-style($bg)
    radius($radius)
}


//
// @styles
//
if $include-html-alert-classes {
    .alert {
        alert()
        alert-size()

        .alert__close {
            alert-close()
        }

        &--rad {
            radius($alert-radius)
        }
        &--rnd {
            radius($global-rounded)
        }

        &--exp {
            alert-size($full-width: true)
        }

        // DEFAULT ALERT STYLE - light soft bg, colored typo
        &--success {
            alert-style($bg: lightness($success-color, 90%), $font-color: lightness($success-color, 30%), $border-color: lightness($success-color, 75%))
            {$is-svg-support} & {
                svg-background($file:'arrows_circle_check.svg', $shapes:('polyline' 'circle'), $size:$alert-bg-icosize, $stroke-width:$svg-stroke-width-medium, $stroke:$success-color, $stroke-hover:false, $position-x:$default-float)
            }
        }
        &--neutral {
            alert-style($bg: lightness($neutral-color, 90%), $font-color: lightness($neutral-color, 30%), $border-color: lightness($neutral-color, 75%))
            {$is-svg-support} & {
                svg-background($file:'arrows_info.svg', $shapes:('path' 'line'), $size:$alert-bg-icosize, $stroke-width:$svg-stroke-width-medium, $stroke:$secondary-color, $stroke-hover:false, $position-x:$default-float)
            }
        }
        &--secondary {
            alert-style($bg: lighten($secondary-color, 80%), $font-color: darken($secondary-color, 40%), $border-color: $secondary-color)
            {$is-svg-support} & {
                svg-background($file:'arrows_info.svg', $shapes:('path' 'line'), $size:$alert-bg-icosize, $stroke-width:$svg-stroke-width-medium, $stroke:$secondary-color, $stroke-hover:false, $position-x:$default-float)
            }
        }
        &--info {
            alert-style($bg: lightness($info-color, 90%), $font-color: lightness($info-color, 30%), $border-color: lightness($info-color, 75%))
            {$is-svg-support} & {
                svg-background($file:'arrows_info.svg', $shapes:('path' 'line'), $size:$alert-bg-icosize, $stroke-width:$svg-stroke-width-medium, $stroke:$info-color, $stroke-hover:false, $position-x:$default-float)
            }
        }            
        &--warning {
            alert-style($bg: lightness($warning-color, 90%), $font-color: $alert-font-color-warning, $border-color: lightness($warning-color, 75%))
            {$is-svg-support} & {
                svg-background($file:'arrows_exclamation.svg', $shapes:('path' 'line'), $size:$alert-bg-icosize, $stroke-width:$svg-stroke-width-medium, $stroke:$warning-color, $stroke-hover:false, $position-x:$default-float)
            }
        }
        &--critical {
            alert-style($bg: lighten($alert-color, 80%), $font-color: $alert-font-color-critical, $border-color: $critical-color)
            {$is-svg-support} & {
                svg-background($file:'basic_ban.svg', $shapes:('path' 'line'), $size:$alert-bg-icosize, $stroke-width:$svg-stroke-width-medium, $stroke:$critical-color, $stroke-hover:false, $position-x:$default-float)
            }
        }

        // ALTERNATIVE ALERT STYLE - intense filled bg and inverted typo
        if $include-html-alert-alt-classes {
            &--success-alt {
                alert-style($bg:$success-color, $border-color:$success-color)
            }
            &--secondary-alt {
                alert-style($bg:$secondary-color, $border-color:$secondary-color)
            }
            &--info-alt {
                alert-style($bg:$info-color, $border-color:$info-color)
            }            
            &--warning-alt {
                alert-style($bg: $warning-color, $font-color: $alert-font-color-warning, $border-color:$warning-color)
            }
            &--critical-alt {
                alert-style($bg: $alert-color, $font-color: $alert-font-color-critical, $border-color:$alert-color)
            }
        }

        .is-closed {
            opacity: 0
        }
    }
}