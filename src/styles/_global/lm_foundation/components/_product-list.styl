@require "_global"
@require "_buttons"
@require "_ribbons"


// CSS CLASSES

if $include-html-productlist-classes {
    
    // Wrapper (ul)
    .productlist {

        padding: $product-list-padding
        margin: 0
        background-color: $product-list-bg
        clearfix()
            
        // List item (li)
        .product {
            position: relative
            list-style-type: none
            margin: 0
            padding: $product-list-item-padding
            background-color: $product-list-item-bg
            if ($product-list-item-border) {
                border-longhand($width:$product-list-item-border-width,$style:$product-list-item-border-style,$color:$product-list-item-border-color)
            }
            z-index: 1

            &__inner {
                clearfix()
            }

            &__link {
                clearfix()
                display: block

                &:hover {
                    .btn {
                        background-color: $product-list-button-bg-hover
                        svg-background($file:'arrows_right.svg', $size:$product-list-button-ico-size, $stroke-width:$svg-stroke-width-small, $stroke:$product-list-button-ico-color-hover, $stroke-hover:$product-list-button-ico-color-hover)
                    }
                }
            }
            // Images (wrapper)
            &__img {
                display: block
                background: $product-list-img-bg
                padding: $product-list-img-padding
                margin: $product-grid-img-margin
                width: auto
                height: $product-grid-img-height
                text-align: center

                img {
                    padding: 0
                    margin: 0
                    max-height: 100%
                    border: none
                }
            }

            // Product Manufacturer (optional)
            &__manufacturer {
                display: block
                padding: 0
                margin: 0
                line-height: $product-list-title-line-height
                overflow: hidden
                color: $product-list-manu-color
                font_family($product-list-title-font-family)
                font_size($product-list-manu-font-size)
                font-weight: $product-grid-manu-font-weight
                text-transform: $product-grid-manu-text-transform
            }

            // Product title (h3)
            &__title {
                display: block
                margin: $product-list-title-margin
                padding: $product-list-title-padding
                line-height: $product-list-title-line-height
                color: $product-list-title-color 
                font_family($product-list-title-font-family)
                font_size($product-grid-title-font-size)
                font-weight: $product-list-title-font-weight
                text-decoration: none
                overflow: hidden
            }
            a:hover .product__title {
                color: $product-list-title-color-hover
                single-transition(color,$ease:ease)
            }

            &__shortdesc,
            &__shortdesc p {
                margin: $product-list-desc-margin
                font_family($product-list-desc-font-family)
                font_size($product-list-desc-font-size)
                color: $product-list-desc-color
                line-height: $product-list-desc-line-height
            }

            &__options {
                text-transform: uppercase
                line-height: $product-list-opts-line-height
                font_family($product-list-opts-font-family)
                font-weight: $product-list-opts-font-weight
                color: $product-list-opts-color

                .lbl {
                    float: left
                    margin: $product-list-opts-label-margin
                    padding: $product-list-opts-label-padding
                    line-height: $product-list-opts-line-height
                    if ($product-list-opts-label-border) {
                        border: $product-list-opts-label-border
                    }
                    background-color: $product-list-opts-label-bg
                    color: $product-list-opts-label-color
                    font_size($product-list-opts-font-size)
                }

                ul {
                    margin: 0
                    list-style-type: none
                    li {
                        list-style-type: none
                        display: inline-block
                        padding: $product-list-opts-item-padding
                        margin: $product-list-opts-item-margin
                        background: $product-list-opts-item-bg
                        if ($product-list-opts-item-border) {
                            border: $product-list-opts-item-border
                        }
                        font_size($product-list-opts-font-size)
                    }
                }
            }

            // Buttons
            .btn {
                margin-bottom: 0
                &__details {
                    button-size($padding:$product-list-button-size)
                    button-flat($font-color:$product-list-button-color)
                    svg-background($file:'arrows_right.svg', $size:$product-list-button-ico-size, $stroke-width:$svg-stroke-width-small, $stroke:$product-list-button-ico-color, $stroke-hover:$product-list-button-ico-color-hover, $position-x:center)
                }
            }

            .ribbon {
                top: $product-list-ribbon-offset-top
            }

            // sorty ribbons if we have more than one ribbon
            &--special.product--new {
                .ribbon--primary,
                .ribbon--special {
                    top: ($product-list-ribbon-offset-top + rem-calc(32))
                }
            }

            &:hover {
                background-color: $product-list-item-bg-hover
                overflow: visible
                border-color: $product-list-item-border-hover-color
                if $product-list-item-box-shadow {
                    box-shadow: $product-list-item-box-shadow-hover
                }
                single-transition($speed:300ms)
            
                .product__shortdesc,
                .product__shortdesc p {
                    color: $product-list-desc-color-hover
                    single-transition(color)
                }
            }

        } // eof .product

        // GRID VIEW (4)
        &--grid {
            .product {
                //height: $product-grid-item-height
                margin: $product-list-item-margin
                padding: 0
                
                @media $medium-up {
                    col(1/3, cycle:3)
                }
                @media $medium-only {
                    col(1/2, cycle:2)
                }
                @media $small-only {
                    span(1/1)
                    //height: auto
                }

                &__link {
                    padding: $product-grid-item-padding
                }

                &__manufacturer {
                    @media $medium-up {
                        height: $product-grid-manu-height
                    }
                    @media $small-only {
                        col(2/3)
                    }
                }
                &__title {
                    @media $medium-up {
                        height: $product-grid-title-height
                    }
                    @media $small-only {
                        col(2/3)
                    }
                }

                .price-box {
                    @media $medium-up {
                        height: $product-grid-pricebox-height
                    }
                    @media $small-only {
                        span(1/3)
                        text-align: right
                    }
                    padding: $product-grid-pricebox-padding
                    margin: $product-grid-pricebox-margin
                }

                .btn {
                    font-size: 0
                    text-indent: -(9999em)
                    width: $product-grid-pricebox-height
                    height: $product-grid-pricebox-height
                    float: left
                }
            }
        }

        // LIST VIEW
        &--list {
            .product {
                clearfix()
                clear: both
                padding: $product-list-item-padding
                margin: $product-list-item-margin

                &.first,
                &:first-of-type,
                &:first-child {
                    margin-top: 0
                }
                &.last,
                &:last-of-type,
                &:last-child {
                    margin-bottom: 0
                }

                &__link {
                    padding: $product-list-item-padding
                }

                // Wrapper for img, manufacturer, title and shortdesc
                &__info {
                    @media $medium-up {
                        col(3/4,gutter:0)
                    }
                }

                &__img {
                    margin: $product-list-img-margin
                    margin-left :0
                    width: $product-list-img-width
                    height: $product-list-img-height
                    float: left
                    
                }
                
                &__manufacturer {
                    display: block
                    font-weight: $product-list-manu-font-weight
                    text-transform: $product-list-manu-text-transform
                }
                &__title {
                    display: block
                    font_size($product-list-title-font-size)
                }

                &__shortdesc {
                    display: block
                    padding: $product-list-desc-padding
                }

                .price-box {
                    @media $medium-up {
                        col(1/4,gutter:0)
                        margin-right: 0
                        float: right
                        text-align: right
                    }
                    @media $small-only {
                        span(1/1)
                        text-align: right
                    }
                }

                .btn {

                    text-align: center
                    svg-background($file:false, $position-x:right)

                    @media $medium-up {
                        // col(1/4,gutter:0)
                        padding-right: (2*$product-list-button-ico-size)
                        position: absolute
                        margin-right: 0
                        right: $product-list-item-padding
                        bottom: $product-list-item-padding
                        color: $product-list-item-bg // hides text in normal state
                    }
                    // padding-right: rem-calc(20)
                    @media $small-only {
                        clear: both
                        span(1/1)
                    }
                }
                
                // Align ribbons left
                .ribbon {
                    ribbon-left()
                }

            } // EOF - product
        } // eof &--list


    }

} // EOF - if $include-html-productlist-classes